Description: Override upstream copy and use libbsd
  Avoid using local copy of strlcpy, use the libbsd library in overlay mode
  instead on our supported targets.
Author: Yuri D'Elia <wavexx@thregr.org>
Forwarded: not-needed
Updated: 2017-09-13

--- /dev/null
+++ b/Makefile.debian
@@ -0,0 +1,12 @@
+# `entr` provides a built-in compability layer for Linux. To use compatibility
+# libraries instead insteall libkqueue and libbsd
+#
+# sudo apt-get install libkqueue-dev libbsd-dev pkg-config
+# make test -f Makefile.linux-lbsd
+# sudo make install
+
+CFLAGS += -D_GNU_SOURCE -I/usr/include/kqueue $(shell pkg-config --cflags libbsd-overlay)
+LDFLAGS += -lpthread -lkqueue $(shell pkg-config --libs libbsd-ctor)
+MANPREFIX ?= ${PREFIX}/share/man
+
+include Makefile.bsd
--- a/Makefile.linux
+++ b/Makefile.linux
@@ -1,4 +1,5 @@
 CPPFLAGS += -D_GNU_SOURCE -D_LINUX_PORT -Imissing
+LDFLAGS += $(shell pkg-config --libs libbsd-ctor)
 MANPREFIX ?= ${PREFIX}/share/man
 EXTRA_SRC = missing/strlcpy.c missing/kqueue_inotify.c
 
